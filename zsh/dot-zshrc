bindkey -v
eval "$(sheldon source)"

# Aliases
alias cat="bat -p"
alias mkd="mkdir"
alias rmr="rm -rfv"
alias vim=$(which nvim)

# Applications
eval "$(starship init zsh)"
export BAT_THEME=OneHalfLight
if [[ $(command -v direnv) != "" ]]; then
    zsh-defer eval "$(direnv hook zsh)"
fi
if [[ $(command -v pyenv) != "" ]]; then
    zsh-defer eval "$(pyenv init --path)"
    zsh-defer eval "$(pyenv init -)"
fi

# History
bindkey '^[[A' history-substring-search-up
bindkey '^[[B' history-substring-search-down
export HISTORY_SUBSTRING_SEARCH_FUZZY=1
export SAVEHIST=10000
setopt HIST_IGNORE_ALL_DUPS
setopt HIST_SAVE_NO_DUPS
setopt HIST_REDUCE_BLANKS
setopt INC_APPEND_HISTORY_TIME
setopt EXTENDED_HISTORY

# Variables
export PATH="$HOME/.cargo/bin:$PATH"
export fpath=($HOME/.zfunc $fpath)
if [[ -f ~/.proxy ]]; then
    proxy=`cat ~/.proxy`
    export ALL_PROXY=$proxy
    export all_proxy=$proxy
    export HTTP_PROXY=$proxy
    export http_proxy=$proxy
    export HTTPS_PROXY=$proxy
    export https_proxy=$proxy
fi

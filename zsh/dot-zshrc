zmodload zsh/zprof

### Zinit

if [[ ! -f $HOME/.zinit/bin/zinit.zsh ]]; then
    print -P "%F{33}▓▒░ %F{220}Installing %F{33}DHARMA%F{220} Initiative Plugin Manager (%F{33}zdharma/zinit%F{220})…%f"
    command mkdir -p "$HOME/.zinit" && command chmod g-rwX "$HOME/.zinit"
    command git clone https://github.com/zdharma/zinit "$HOME/.zinit/bin" && \
        print -P "%F{33}▓▒░ %F{34}Installation successful.%f%b" || \
        print -P "%F{160}▓▒░ The clone has failed.%f%b"
fi

source "$HOME/.zinit/bin/zinit.zsh"
# plugins
zinit ice wait lucid src"z.sh"; zinit light rupa/z
zinit ice wait lucid atload"zicompinit; zicdreplay"; zinit light zdharma/fast-syntax-highlighting
# omz libraries
zinit for \
    OMZL::completion.zsh \
    OMZL::directories.zsh \
    OMZL::key-bindings.zsh \
    OMZL::theme-and-appearance.zsh
# omz plugins
zinit ice wait lucid; zinit snippet OMZP::colored-man-pages/colored-man-pages.plugin.zsh
zinit ice wait lucid; zinit snippet OMZP::extract/extract.plugin.zsh
zinit ice wait lucid; zinit snippet OMZP::git/git.plugin.zsh
### Zinit END
#
### User Configuration

## Bat
export BAT_THEME=OneHalfLight
## Direnv
if [ $(command -v direnv) != "" ]; then
    eval "$(direnv hook zsh)"
fi
## N
if [ -d $HOME/.n ]; then
    export N_PREFIX="$HOME/.n"
    export PATH="$N_PREFIX/bin:$PATH"
fi
## NeoVim
alias vim="nvim"
## Others
bindkey -v
proxy=`cat ~/.proxy`
export ALL_PROXY=$proxy
export all_proxy=$proxy
export HTTP_PROXY=$proxy
export http_proxy=$proxy
export HTTPS_PROXY=$proxy
export https_proxy=$proxy
## Poetry
export PATH="$HOME/.local/bin:$PATH"
## Pyenv
if [ $(command -v pyenv) != "" ]; then
    eval "$(pyenv init --path)"
    eval "$(pyenv init -)"
fi
## Rust
export PATH="$HOME/.cargo/bin:$PATH"
## Starship
eval "$(starship init zsh)"

### User Configuration END


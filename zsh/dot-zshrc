### Zinit

if [[ ! -f $HOME/.zinit/bin/zinit.zsh ]]; then
    print -P "%F{33}▓▒░ %F{220}Installing %F{33}DHARMA%F{220} Initiative Plugin Manager (%F{33}zdharma/zinit%F{220})…%f"
    command mkdir -p "$HOME/.zinit" && command chmod g-rwX "$HOME/.zinit"
    command git clone https://github.com/zdharma/zinit "$HOME/.zinit/bin" && \
        print -P "%F{33}▓▒░ %F{34}Installation successful.%f%b" || \
        print -P "%F{160}▓▒░ The clone has failed.%f%b"
fi

source "$HOME/.zinit/bin/zinit.zsh"
# plugins
zinit ice wait lucid src"z.sh"; zinit light rupa/z
zinit ice wait lucid atinit"ZINIT[COMPINIT_OPTS]=-C; zicompinit; zicdreplay"; zinit light zdharma/fast-syntax-highlighting
zinit ice wait lucid blockf; zinit light zsh-users/zsh-completions
# omz libraries
zinit for \
    OMZL::completion.zsh \
    OMZL::directories.zsh \
    OMZL::key-bindings.zsh \
    OMZL::theme-and-appearance.zsh
# omz plugins
zinit ice wait lucid; zinit snippet OMZP::colored-man-pages/colored-man-pages.plugin.zsh
zinit ice wait lucid; zinit snippet OMZP::extract/extract.plugin.zsh
zinit ice wait lucid; zinit snippet OMZP::git/git.plugin.zsh
if [ -d $HOME/.pyenv ]; then
    zinit ice wait lucid atload"source <(python -m pip completion --zsh)"
    zinit snippet OMZP::pyenv/pyenv.plugin.zsh
fi
# others
zinit ice wait lucid as"completion"; zinit snippet https://github.com/docker/cli/blob/master/contrib/completion/zsh/_docker
zinit ice wait lucid as"completion"; zinit snippet https://github.com/docker/compose/blob/master/contrib/completion/zsh/_docker-compose
if [[ $(uname -s) == "Darwin" ]]; then
    zinit ice from"gh-r" as"program" ver"nightly" atclone"ln -s nvim-osx64/bin/nvim nvim" bpick"*macos*"
    zinit load neovim/neovim
else
    zinit ice from"gh-r" as"program" ver"nightly" mv"nvim.appimage -> nvim" bpick"*appimage*"
    zinit load neovim/neovim
fi
### Zinit END
#
### User Configuration

## Bat
export BAT_THEME=OneHalfLight
## Direnv
if [[ `command -v direnv` != "" ]]; then
    eval "$(direnv hook zsh)"
fi
## Golang
if [[ `command -v go` != "" ]]; then
    export GOPATH="`(go env GOPATH)`"
    export PATH="$GOPATH/bin:$PATH"
fi
## N
if [ -d $HOME/.n ]; then
    export N_PREFIX="$HOME/.n"
    export PATH="$N_PREFIX/bin:$PATH"
fi
## NeoVim
alias vim="nvim"
## Others
bindkey -v
proxy=`cat ~/.zsh_proxy`
export ALL_PROXY=$proxy
export all_proxy=$proxy
export HTTP_PROXY=$proxy
export http_proxy=$proxy
export HTTPS_PROXY=$proxy
export https_proxy=$proxy
## Poetry
export PATH="$HOME/.poetry/bin:$PATH"
## Rust
export PATH="$HOME/.cargo/bin:$PATH"
## Starship
eval "$(starship init zsh)"

### User Configuration END

